# 学生プラザ3F 留学交流グループ シフト調整システム

学生 (PA) のシフト提出と管理者向け集計を 1 つの静的アプリで完結できるツールです。
現在は **ブラウザのローカル環境だけで動作** し、外部の独自サーバーやデータベースとは通信しません。
すべてのデータは閲覧中のブラウザの LocalStorage に保存されます。

## 主な画面

- **PA入力タブ**: 平日だけを表示するカレンダーで午前/午後/1日/その他を選択して提出できます。
- **Admin › 特別日追加**: 授業振替日などを登録し、PA入力カレンダーと集計表へ反映します。
- **Admin › PA編集**: シフト入力で選べる名前を追加・更新・削除できます。
- **Admin › シフト調整**: 提出済みデータを午前/午後スロットごとに並べ替えて確認し、確定済みのシフトを画像として保存できます。

## 使い方

1. リポジトリをクローン、または ZIP を展開します。
2. `index.html` をブラウザで直接開くか、任意の HTTP サーバー
   (例: `python -m http.server 8000`) で公開します。
3. 「Admin › PA編集」でメンバーを登録し、「PA入力」で各自のシフトを入力してください。
4. 入力済みデータはブラウザの LocalStorage に保存されるため、同じ PC/ブラウザから再度アクセスすると再読み込みされます。

> ⚠️ LocalStorage が利用できない環境 (シークレットウィンドウなど) の場合は、ページを閉じるとデータが失われます。

## Render (無料プラン) で公開する手順

静的サイトとして構成されているため、Render の無料 Static Site サービスでそのまま公開できます。`render.yaml` をリポジトリに含めてあるので、Blueprint からのデプロイが可能です。

1. **GitHub にリポジトリを用意**
   - このリポジトリを自身の GitHub アカウントへ push します (Public でも Private でも可)。
2. **Render アカウントを作成 / ログイン**
   - https://render.com にアクセスし、無料アカウントを作成します。
3. **Blueprint (Infrastructure as Code) でデプロイ**
   - Render ダッシュボードで「New +」→「Blueprint」を選択し、GitHub と連携します。
   - 対象リポジトリを選択すると `render.yaml` が検出され、Static Site の設定が自動入力されます。
   - `name` は Render 上のサービス名です。必要に応じて変更してください。
   - Build Command は空、Publish Directory はリポジトリルート (`.`) のままで問題ありません。
4. **デプロイを開始**
   - 「Apply」→「Deploy」を押すとビルドが始まり、完了後に自動で https://<your-service>.onrender.com が割り当てられます。
   - サイトが 404 になる場合はデプロイ完了を待つか、`render.yaml` の設定を再確認してください。
5. **更新方法**
   - main ブランチ (もしくは Render で指定したブランチ) に push すると、自動で再デプロイされます。
   - ローカルでの挙動と同じく、各利用者の LocalStorage にのみデータが保存されるため、データ共有が必要な場合は別途仕組みを用意してください。

> Render 無料枠の Static Site は、30 分間アクセスがないとスリープし次回アクセス時に数十秒かけて再起動します。待機時間を減らしたい場合は有料プランの利用を検討してください。

## データの保存について

| 種別 | 保存先 LocalStorage キー | 備考 |
| --- | --- | --- |
| PA 名簿 | `paShiftNames` | ID と名前を配列で保存します |
| 特別日 | `paShiftSpecialDays` | `date` と `note` を保存します |
| シフト提出 | `paShiftSubmissions` | 各日付の `name` / `shiftType` / 時刻を保存します |

ブラウザに保存されたデータをリセットしたい場合は、ブラウザの開発者ツールや設定から該当サイトの LocalStorage を削除してください。

## 開発メモ

- ビルド工程はありません。`index.html`, `styles.css`, `script.js` を直接編集してください。
- 祝日データは `https://holidays-jp.github.io/api/v1/date.json` から取得します (取得できない場合は祝日ハイライトなしで動作します)。
- Admin 画面でシフトを確定すると、その状態を画像としてエクスポートできます。
